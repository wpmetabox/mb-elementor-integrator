(()=>{"use strict";const e=()=>({onReady(){const e=setInterval(((t=this)=>{if(null!=t._parent){clearInterval(e),this.control_repeater=t.options.elementSettingsModel.attributes["map-field-group"]?t.options.elementSettingsModel.attributes["map-field-group"]:void 0;var o=[];this.control_repeater.models.length>0&&this.control_repeater.models.map((e=>{o.push(e.attributes.subfield)})),t.control_select=t.$el.find(".group-field-select"),t.control_map_content=t._parent.$el.find(".elementor-control-map-field-group .elementor-repeater-fields-wrapper"),t.control_map_button=t._parent.$el.find(".elementor-control-map-field-group .elementor-repeater-add").hide(),t.control_map_select=t._parent.$el.find('.elementor-control-map-field-group select[data-setting="subfield"]'),t.loadSubField(o),t.control_select.change((()=>t.saveValue()))}}),300)},saveValue(){this.setValue(this.control_select.val()),this.loadSubField()},loadSubField(e){if(""===this.control_select.val())this.control_repeater.reset();else{const t=this;jQuery.ajax({url:mebi_ajax.url,type:"post",data:{action:"group_subfield",nonce:mebi_ajax.nonce,groupfield:this.control_select.val()},success:o=>{if(!0===o.success){void 0!==t._parent&&t.control_repeater.reset();var r=[];jQuery.each(o.data,((e,o)=>{t.control_map_button.trigger("click"),r.push(`<option value="${e}">${o}</option>`)}));const l=t._parent.$el.find('.elementor-control-map-field-group select[data-setting="subfield"]');jQuery(l).html(r.join("")),jQuery.each(l,((o,r)=>{void 0!==e&&""!==e[o]?(jQuery(r).find("option[value='"+e[o]+"']").attr("selected",!0).trigger("change"),t._parent.$el.find(".elementor-control-map-field-group .elementor-repeater-row-item-title:eq("+o+") span").text(jQuery(r).find("option[value='"+e[o]+"']").text())):(jQuery(r).find("option:eq("+o+")").attr("selected",!0).trigger("change"),t._parent.$el.find(".elementor-control-map-field-group .elementor-repeater-row-item-title:eq("+o+") span").text(jQuery(r).find("option:eq("+o+")").text()))}))}}})}},onBeforeDestroy(){this.saveValue()}});window.addEventListener("elementor/init",(function(){return t=elementor.modules.controls,void elementor.addControlView("mb_group_field",t.BaseData.extend(e()));var t}))})();