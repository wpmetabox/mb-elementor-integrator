(()=>{"use strict";const e=()=>({onReady(){const e=setInterval(((t=this)=>{if(null!=t._parent){clearInterval(e),t.control_repeater=t.options.elementSettingsModel.attributes["map-field-group"]?t.options.elementSettingsModel.attributes["map-field-group"]:void 0;var o=[];t.control_repeater.models.length>0&&t.control_repeater.models.map((e=>{o.push(e.attributes.subfield)})),t.control_select=t.$el.find(".group-field-select"),t.control_map_content=t._parent.$el.find(".elementor-control-map-field-group .elementor-repeater-fields-wrapper"),t.control_map_button=t._parent.$el.find(".elementor-control-map-field-group .elementor-repeater-add").hide(),t.control_map_select=t._parent.$el.find('.elementor-control-map-field-group select[data-setting="subfield"]'),t.loadSubField(o),t.control_select.change((()=>t.saveValue()))}}),300)},saveValue(){this.setValue(this.control_select.val()),this.loadSubField()},loadSubField(e){if(""===this.control_select.val())this.control_repeater.reset();else{const t=this;void 0!==t._parent.$el&&""!==t._parent.$el&&jQuery.ajax({url:mebi_ajax.url,type:"post",data:{action:"group_subfield",nonce:mebi_ajax.nonce,groupfield:this.control_select.val()},success:o=>{if(!0===o.success&&void 0!==t._parent){t.control_repeater.reset();var l=[];jQuery.each(o.data,((e,o)=>{t.control_map_button.trigger("click"),l.push(`<option value="${e}">${o}</option>`)}));const r=t._parent.$el.find('.elementor-control-map-field-group select[data-setting="subfield"]');jQuery(r).html(l.join("")),jQuery.each(r,((t,o)=>{void 0!==e&&""!==e[t]?jQuery(o).find("option[value='"+e[t]+"']").attr("selected",!0).trigger("change"):jQuery(o).find("option:eq("+t+")").attr("selected",!0).trigger("change")}))}}})}},onBeforeDestroy(){this.saveValue(),this.loadSubField()}});window.addEventListener("elementor/init",(function(){return t=elementor.modules.controls,void elementor.addControlView("mb_group_field",t.BaseData.extend(e()));var t}))})();